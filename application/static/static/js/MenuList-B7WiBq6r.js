var S=Object.defineProperty;var D=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var N=(i,o,t)=>o in i?S(i,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[o]=t,$=(i,o)=>{for(var t in o||(o={}))A.call(o,t)&&N(i,t,o[t]);if(D)for(var t of D(o))J.call(o,t)&&N(i,t,o[t]);return i};var _=(i,o,t)=>new Promise((y,d)=>{var k=u=>{try{c(t.next(u))}catch(b){d(b)}},a=u=>{try{c(t.throw(u))}catch(b){d(b)}},c=u=>u.done?y(u.value):Promise.resolve(u.value).then(k,a);c((t=t.apply(i,o)).next())});import{m as C}from"./setting-CF3FtGYT.js";import{_ as K}from"./BaseDialog.vue_vue_type_script_setup_true_lang-1kYJ3j0E.js";import{B as O}from"./BaseTable-CN9KI-X5.js";import{D as P,r as p,k as T,o as X,R as m,y as j,z as R,M as f,P as l,X as s,a2 as v,a3 as G,J as H,aK as Q,an as U,w as W}from"./index-DofruHnK.js";const Y={class:"app-container"},Z={class:"filter-container"},h={class:"flex-btn"},ee={class:"dialog-footer"},le=P({name:"MenuList",__name:"MenuList",setup(i){const o=p(null),t=p(!1),y=T({add:"添加菜单",update:"修改菜单"}),d=p(null),k=T({parentId:0,title:"",name:"",rank:null,level:null}),a=p($({},k)),c=T({title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],name:[{required:!0,message:"请输入路由路径",trigger:"blur"}],rank:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]}),u=p(),b=p(null);X(()=>{M()});const M=()=>_(null,null,function*(){const{data:r}=yield C.getMenuList();o.value=r}),q=r=>{Q.confirm("此操作将永久删除该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>_(null,null,function*(){yield C.delMenu({id:r.id}),U({type:"success",message:"删除成功！"}),yield M()})).catch(()=>{U({type:"info",message:"已取消删除！"})})},B=(r,e)=>{d.value=r,e!==""&&r==="add"?(a.value.level=e.level+1,a.value.parentId=e.parentId):e!==""&&r==="update"&&(b.value=e.id,a.value=e),t.value=!0},F=r=>_(null,null,function*(){r&&(yield r.validate(e=>_(null,null,function*(){e&&(d.value==="update"?yield C.updateMenu(a.value):yield C.addMenu(a.value),U({type:"success",message:y[d.value]+"成功！"}),w(),yield M())})))}),w=()=>{var r;t.value=!1,a.value=$({},k),(r=u.value)==null||r.resetFields()};return(r,e)=>{const L=m("el-button"),g=m("el-table-column"),I=m("el-link"),V=m("el-input"),x=m("el-form-item"),E=m("el-form");return R(),j("div",Y,[f("div",Z,[l(L,{type:"primary",class:"filter-item",onClick:e[0]||(e[0]=n=>B("add",""))},{default:s(()=>[...e[7]||(e[7]=[v("添加菜单",-1)])]),_:1})]),l(O,{data:o.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"","default-expand-all":""},{default:s(()=>[l(g,{prop:"title",label:"菜单名称",align:"center"}),l(g,{prop:"name",label:"路由名称",align:"center"}),l(g,{prop:"level",label:"菜单等级",sortable:"",align:"center"}),l(g,{prop:"rank",label:"路由等级",sortable:"",align:"center"}),l(g,{label:"操作",align:"center",width:"200",fixed:"right"},{default:s(({row:n})=>[f("div",h,[l(I,{type:"primary",onClick:z=>B("add",n)},{default:s(()=>[...e[8]||(e[8]=[v("添加",-1)])]),_:1},8,["onClick"]),l(I,{type:"primary",onClick:z=>B("update",n)},{default:s(()=>[...e[9]||(e[9]=[v("修改",-1)])]),_:1},8,["onClick"]),l(I,{type:"danger",onClick:z=>q(n)},{default:s(()=>[...e[10]||(e[10]=[v("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),l(K,{modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=n=>t.value=n),title:y[d.value],onClose:w},{footer:s(()=>[f("div",ee,[l(L,{onClick:w},{default:s(()=>[...e[14]||(e[14]=[v("取消",-1)])]),_:1}),l(L,{type:"primary",onClick:e[5]||(e[5]=n=>F(u.value))},{default:s(()=>[...e[15]||(e[15]=[v("确定",-1)])]),_:1})])]),default:s(()=>[l(E,{ref_key:"formRef",ref:u,model:a.value,"label-width":"auto","label-position":"right",rules:c},{default:s(()=>[l(x,{label:"菜单名称",prop:"title"},{default:s(()=>[l(V,{modelValue:a.value.title,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.title=n),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),l(x,{label:"路由路径",prop:"name"},{default:s(()=>[l(V,{modelValue:a.value.name,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.name=n),placeholder:"请输入路由路径",clearable:""},null,8,["modelValue"]),e[11]||(e[11]=f("span",{style:{color:"#f56c6c","font-size":"12px"}},"路由路径：建议首字符大写",-1))]),_:1}),l(x,{label:"菜单排序",prop:"rank"},{default:s(()=>[l(V,{modelValue:a.value.rank,"onUpdate:modelValue":e[3]||(e[3]=n=>a.value.rank=n),placeholder:"请输入菜单排序",clearable:""},null,8,["modelValue"]),e[12]||(e[12]=f("span",{style:{color:"#f56c6c","font-size":"12px"}},"菜单排序，值越高排的越后,数值只能为正整数。如：2",-1))]),_:1}),d.value==="update"?(R(),G(x,{key:0,label:"菜单等级",prop:"level"},{default:s(()=>[l(V,{modelValue:a.value.level,"onUpdate:modelValue":e[4]||(e[4]=n=>a.value.level=n),placeholder:"请输入菜单等级",clearable:""},null,8,["modelValue"]),e[13]||(e[13]=f("span",{style:{color:"#f56c6c","font-size":"12px"}},"菜单等级，多级菜单中显示在当前主菜单你对应级别的菜单位置,数值只能为正整数。如：2",-1))]),_:1})):H("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),re=W(le,[["__scopeId","data-v-9e70d6f3"]]);export{re as default};
