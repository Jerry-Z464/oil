var F=Object.defineProperty;var C=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var L=(u,n,r)=>n in u?F(u,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[n]=r,k=(u,n)=>{for(var r in n||(n={}))P.call(n,r)&&L(u,r,n[r]);if(C)for(var r of C(n))S.call(n,r)&&L(u,r,n[r]);return u};var x=(u,n,r)=>new Promise((p,m)=>{var v=s=>{try{b(r.next(s))}catch(c){m(c)}},o=s=>{try{b(r.throw(s))}catch(c){m(c)}},b=s=>s.done?p(s.value):Promise.resolve(s.value).then(v,o);b((r=r.apply(u,n)).next())});import{D as q,aj as H,L as T,at as Z,r as w,k as D,H as z,a3 as A,X as a,P as l,R as g,a2 as N,ap as j,z as B,a9 as O,o as X,I as G,y as J,M as y,a1 as M,q as f,aM as K,aN as Q,n as W,E as Y,an as ee,w as le}from"./index-DofruHnK.js";import{u as oe,c as ae,b as $,d as te}from"./user-3-fill-ClktEpth.js";import{_ as re}from"./BaseDialog.vue_vue_type_script_setup_true_lang-1kYJ3j0E.js";const U=q({name:"Motion",props:{delay:{type:Number,default:50}},render(){const{delay:u}=this,n=H("motion");return T(Z("div",{},{default:()=>[this.$slots.default()]}),[[n,{initial:{opacity:0,y:100},enter:{opacity:1,y:0,transition:{delay:u}}}]])}}),ne={width:24,height:24,body:'<path fill="currentColor" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"/>'},se=q({__name:"RegisterDialog",props:{registerVisible:{default:!1,type:Boolean}},emits:["closeRegister"],setup(u,{emit:n}){const r=u,p=w(!1),m=w(),v=D({account:null,name:null,deptId:null,roleId:null,phoneNumber:null,profilePhoto:null,email:null,position:null,principal:"1",password:null}),o=w(k({},v)),b=D({account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:20,message:"长度在3到20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6位",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],principal:[{required:!0,message:"请选择是否负责人",trigger:"change"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],deptId:[{required:!0,message:"请输入部门ID",trigger:"blur"}],roleId:[{required:!0,message:"请输入角色ID",trigger:"blur"}],position:[{required:!0,message:"请输入职位",trigger:"blur"}]}),s=_=>x(null,null,function*(){yield _.validate(e=>x(null,null,function*(){e&&(yield j.register(o.value))}))}),c=n,I=()=>{p.value=!1,o.value=k({},v),c("closeRegister")};return z(()=>r.registerVisible,()=>{p.value=r.registerVisible},{deep:!0,immediate:!0}),(_,e)=>{const d=g("el-input"),i=g("el-form-item"),h=g("el-option"),R=g("el-select"),V=g("el-button"),E=g("el-form");return B(),A(re,{title:"注册",modelValue:p.value,"onUpdate:modelValue":e[11]||(e[11]=t=>p.value=t),onClose:I},{default:a(()=>[l(E,{model:o.value,rules:b,ref_key:"formRef",ref:m,"label-width":"120px"},{default:a(()=>[l(i,{label:"账号",prop:"account"},{default:a(()=>[l(d,{modelValue:o.value.account,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.account=t),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),l(i,{label:"姓名",prop:"name"},{default:a(()=>[l(d,{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),l(i,{label:"部门ID",prop:"deptId"},{default:a(()=>[l(d,{modelValue:o.value.deptId,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.deptId=t),placeholder:"请输入部门ID"},null,8,["modelValue"])]),_:1}),l(i,{label:"角色ID",prop:"roleId"},{default:a(()=>[l(d,{modelValue:o.value.roleId,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.roleId=t),placeholder:"请输入角色ID"},null,8,["modelValue"])]),_:1}),l(i,{label:"手机号",prop:"phoneNumber"},{default:a(()=>[l(d,{modelValue:o.value.phoneNumber,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.phoneNumber=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),l(i,{label:"头像",prop:"profilePhoto"},{default:a(()=>[l(d,{modelValue:o.value.profilePhoto,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.profilePhoto=t),placeholder:"请输入头像地址"},null,8,["modelValue"])]),_:1}),l(i,{label:"邮箱",prop:"email"},{default:a(()=>[l(d,{modelValue:o.value.email,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),l(i,{label:"职位",prop:"position"},{default:a(()=>[l(d,{modelValue:o.value.position,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.position=t),placeholder:"请输入职位"},null,8,["modelValue"])]),_:1}),l(i,{label:"是否负责人",prop:"principal"},{default:a(()=>[l(R,{modelValue:o.value.principal,"onUpdate:modelValue":e[8]||(e[8]=t=>o.value.principal=t),placeholder:"请选择"},{default:a(()=>[l(h,{label:"是",value:"1"}),l(h,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"密码",prop:"password"},{default:a(()=>[l(d,{modelValue:o.value.password,"onUpdate:modelValue":e[9]||(e[9]=t=>o.value.password=t),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),l(i,null,{default:a(()=>[l(V,{type:"primary",onClick:e[10]||(e[10]=t=>s(m.value))},{default:a(()=>[...e[12]||(e[12]=[N("提交",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),ue={class:"login-container"},ie={class:"login-box"},de={class:"outline-none",style:{"letter-spacing":"5px"}},pe={class:"login-form"},me={style:{color:"#0f0303"}},fe=q({name:"Login",__name:"index",setup(u){const{t:n}=O(),r=W(),p=w(!1),m=w(!1),v=w(),{initStorage:o}=oe();o();const{title:b}=ae(),s=D({username:null,password:null}),c=_=>x(null,null,function*(){m.value=!0,_&&(yield _.validate(e=>{e&&(K().loginByUsername(s).then(d=>{Q().then(()=>{r.push(Y(!0).path),ee.success("登录成功")}),m.value=!1}),m.value=!1)}))});function I({code:_}){_==="Enter"&&c(v.value)}return X(()=>{window.document.addEventListener("keypress",I)}),G(()=>{window.document.removeEventListener("keypress",I)}),(_,e)=>{const d=g("el-input"),i=g("el-form-item"),h=g("el-button"),R=g("el-form");return B(),J("div",ue,[y("div",ie,[y("h1",de,M(f(b)),1),y("div",pe,[l(f(U),null,{default:a(()=>[...e[5]||(e[5]=[y("h2",{class:"outline-none"},"欢迎登录",-1)])]),_:1}),l(R,{ref_key:"ruleFormRef",ref:v,model:s,size:"large"},{default:a(()=>[l(f(U),{delay:100},{default:a(()=>[l(i,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:a(()=>[l(d,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=V=>s.username=V),clearable:"",placeholder:"账号","prefix-icon":f($)(f(te))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),l(f(U),{delay:150},{default:a(()=>[l(i,{prop:"password"},{default:a(()=>[l(d,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=V=>s.password=V),clearable:"","show-password":"",placeholder:"密码","prefix-icon":f($)(f(ne))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),y("div",me,[e[6]||(e[6]=N("没有帐号？ ",-1)),y("span",{style:{color:"#409eff"},class:"cursor-pointer",onClick:e[2]||(e[2]=V=>p.value=!0)},"点此注册")]),l(f(U),{delay:250},{default:a(()=>[l(h,{class:"w-full mt-4",type:"primary",loading:m.value,onClick:e[3]||(e[3]=V=>c(v.value))},{default:a(()=>[N(M(f(n)("login.pureLogin")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),l(se,{"register-visible":p.value,onCloseRegister:e[4]||(e[4]=V=>p.value=!1)},null,8,["register-visible"])])])}}}),Ve=le(fe,[["__scopeId","data-v-228b238c"]]);export{Ve as default};
