var de=Object.defineProperty;var X=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var H=(v,o,u)=>o in v?de(v,o,{enumerable:!0,configurable:!0,writable:!0,value:u}):v[o]=u,S=(v,o)=>{for(var u in o||(o={}))re.call(o,u)&&H(v,u,o[u]);if(X)for(var u of X(o))se.call(o,u)&&H(v,u,o[u]);return v};var b=(v,o,u)=>new Promise((_,w)=>{var s=r=>{try{g(u.next(r))}catch(B){w(B)}},R=r=>{try{g(u.throw(r))}catch(B){w(B)}},g=r=>r.done?_(r.value):Promise.resolve(r.value).then(s,R);g((u=u.apply(v,o)).next())});import{_ as J}from"./BaseDialog.vue_vue_type_script_setup_true_lang-PRE88zNh.js";import{b as y,B as pe}from"./setting-bzqi1Zug.js";import{P as me}from"./Page-DeLWWzfO.js";import{A as ve,b as d,k as T,o as fe,I as f,w as K,y as E,M as P,P as l,Y as a,$ as m,S as ce,T as ye,a1 as ge,X as be,aG as Q,aj as x}from"./index-DlZhamGx.js";const Ce={class:"app-container"},Ve={class:"filter-container"},ke=["onDblclick"],Te={class:"filter-container"},Se=ve({__name:"BaseType",setup(v){const o=d(!1),u=T({add:"添加类型",update:"修改类型"}),_=d(null),w=T({id:null,type:null,code:null}),s=d(S({},w)),R=T({type:[{required:!0,message:"请输入类型名称",trigger:"blur"}],code:[{required:!0,message:"请输入类型编码",trigger:"blur"},{pattern:/^[A-Z]+(_[A-Z]+)*$/,message:"编码必须为全大写英文和下划线组合",trigger:"blur"}]}),g=d(),r=d(!1),B=T({add:"添加类型内容",update:"修改类型内容"}),L=d(null),z=T({typeCode:null,content:null,rank:1,code:null}),i=d(S({},z)),W=T({content:[{required:!0,message:"请输入类型内容",trigger:"blur"}],code:[{required:!0,message:"请输入类型内容编码",trigger:"blur"}],rank:[{required:!0,message:"请输入排序",trigger:"blur"}]}),D=d(),$=d("condition"),C=d([{id:1,type:"条件类型",code:"condition"}]),A=d([]),p=d({typeId:null,content:null,code:null,pageSize:10,pageNumber:1}),O=d(0);fe(()=>{F()});function F(){return b(this,null,function*(){const{data:n}=yield y.getBaseTypeList();C.value=n,C.value.length>0&&($.value=C.value[0].code,p.value.code=C.value[0].code,yield V())})}const h=n=>{const e=C.value.find(c=>c.code===n);Q.confirm("是否删除该类型?","提示",{type:"warning"}).then(()=>b(null,null,function*(){yield y.delBaseType({id:e.id}),x.success("操作成功!"),yield F()})).catch(()=>{x.info("已取消操作!")})},ee=n=>{Q.confirm("是否删除该类型?","提示",{type:"warning"}).then(()=>b(null,null,function*(){yield y.delBaseTypeContent({id:n.id}),x.success("操作成功!"),yield V()})).catch(()=>{x.info("已取消操作!")})};function q(){o.value=!1,s.value=S({},w),g.value.resetFields(),F()}function le(n){n.validate(e=>b(null,null,function*(){e&&(_.value==="add"?yield y.addBaseType(s.value):yield y.updateBaseType(s.value),q())}))}function j(n,e){_.value=n,n==="update"&&(s.value=e),o.value=!0}function V(){return b(this,null,function*(){const{data:n,total:e}=yield y.getBaseTypeContentList(p.value);A.value=n,O.value=e})}function M(){r.value=!1,i.value=S({},z),i.value.typeCode=$.value,D.value.resetFields(),V()}function te(n){n.validate(e=>b(null,null,function*(){e&&(L.value==="add"?yield y.addBaseTypeContent(i.value):yield y.updateBaseTypeContent(i.value),M())}))}function I(n,e){L.value=n,n==="update"&&(i.value=Object.assign({},e)),r.value=!0}const ae=n=>{p.value.code=n.props.name,i.value.typeCode=n.props.name,p.value.pageNumber=1,p.value.pageSize=10,V()};return(n,e)=>{const c=f("el-button"),ne=f("el-tag"),oe=f("el-tab-pane"),ue=f("el-tabs"),U=f("el-input"),k=f("el-table-column"),Y=f("el-link"),N=f("el-form-item"),Z=f("el-form"),ie=f("el-input-number");return E(),K("div",Ce,[P("div",Ve,[l(c,{class:"filter-item",type:"primary",onClick:e[0]||(e[0]=t=>j("add"))},{default:a(()=>[...e[15]||(e[15]=[m("添加类型",-1)])]),_:1}),l(ne,{type:"primary"},{default:a(()=>[...e[16]||(e[16]=[m("双击类型标签，修改类型",-1)])]),_:1})]),l(ue,{modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=t=>$.value=t),type:"card",closable:"",onTabRemove:h,onTabClick:ae},{default:a(()=>[(E(!0),K(ce,null,ye(C.value,t=>(E(),ge(oe,{key:t.code,name:t.code},{label:a(()=>[P("span",{onDblclick:G=>j("update",t)},be(t.type),41,ke)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),P("div",Te,[l(U,{modelValue:p.value.content,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value.content=t),placeholder:"请输入内容",class:"filter-item w250",clearable:""},null,8,["modelValue"]),l(c,{class:"filter-item",type:"primary",onClick:e[3]||(e[3]=t=>I("add"))},{default:a(()=>[...e[17]||(e[17]=[m("添加内容",-1)])]),_:1}),l(c,{class:"filter-item",type:"primary",onClick:V},{default:a(()=>[...e[18]||(e[18]=[m("查询",-1)])]),_:1})]),l(pe,{data:A.value,border:""},{default:a(()=>[l(k,{type:"index",label:"序号",align:"center",width:"60"}),l(k,{prop:"content",label:"类型内容",align:"center","min-width":"120"}),l(k,{prop:"code",label:"内容编码",align:"center","min-width":"120"}),l(k,{prop:"rank",label:"排序",align:"center","min-width":"150"}),l(k,{prop:"createTime",label:"创建时间",align:"center","min-width":"150"}),l(k,{label:"操作",align:"center","min-width":"140"},{default:a(({row:t})=>[l(Y,{type:"primary",onClick:G=>I("update",t)},{default:a(()=>[...e[19]||(e[19]=[m("修改",-1)])]),_:1},8,["onClick"]),l(Y,{type:"danger",style:{"margin-left":"8px"},onClick:G=>ee(t)},{default:a(()=>[...e[20]||(e[20]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l(me,{total:O.value,limit:p.value.pageSize,"onUpdate:limit":e[4]||(e[4]=t=>p.value.pageSize=t),page:p.value.pageNumber,"onUpdate:page":e[5]||(e[5]=t=>p.value.pageNumber=t),onPagination:V},null,8,["total","limit","page"]),l(J,{modelValue:o.value,"onUpdate:modelValue":e[9]||(e[9]=t=>o.value=t),title:u[_.value],onClose:q},{footer:a(()=>[l(c,{onClick:q},{default:a(()=>[...e[21]||(e[21]=[m("取消",-1)])]),_:1}),l(c,{type:"primary",onClick:e[8]||(e[8]=t=>le(g.value))},{default:a(()=>[...e[22]||(e[22]=[m("确定",-1)])]),_:1})]),default:a(()=>[l(Z,{ref_key:"formTypeRef",ref:g,model:s.value,rules:R,"label-width":"80px"},{default:a(()=>[l(N,{label:"类型名称",prop:"type"},{default:a(()=>[l(U,{modelValue:s.value.type,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.type=t),placeholder:"请输入类型名称"},null,8,["modelValue"])]),_:1}),l(N,{label:"类型编码",prop:"code"},{default:a(()=>[l(U,{modelValue:s.value.code,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.code=t),placeholder:"请输入类型编码(编码可为全大写英文或者全大写英文+下划线)"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),l(J,{modelValue:r.value,"onUpdate:modelValue":e[14]||(e[14]=t=>r.value=t),title:B[L.value],onClose:M},{footer:a(()=>[l(c,{onClick:M},{default:a(()=>[...e[24]||(e[24]=[m("取消",-1)])]),_:1}),l(c,{type:"primary",onClick:e[13]||(e[13]=t=>te(D.value))},{default:a(()=>[...e[25]||(e[25]=[m("确定",-1)])]),_:1})]),default:a(()=>[l(Z,{ref_key:"formContentRef",ref:D,model:i.value,"label-width":"auto",rules:W},{default:a(()=>[l(N,{label:"类型内容",prop:"content"},{default:a(()=>[l(U,{modelValue:i.value.content,"onUpdate:modelValue":e[10]||(e[10]=t=>i.value.content=t),placeholder:"请输入类型内容",clearable:""},null,8,["modelValue"])]),_:1}),l(N,{label:"类型内容编码",prop:"code"},{default:a(()=>[l(U,{modelValue:i.value.code,"onUpdate:modelValue":e[11]||(e[11]=t=>i.value.code=t),placeholder:"请输入类型内容编码"},null,8,["modelValue"])]),_:1}),l(N,{label:"排序",prop:"rank"},{default:a(()=>[l(ie,{modelValue:i.value.rank,"onUpdate:modelValue":e[12]||(e[12]=t=>i.value.rank=t),"controls-position":"right",min:1,max:1e3},null,8,["modelValue"]),e[23]||(e[23]=m(" 数字越小越靠前，默认为1 ",-1))]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}});export{Se as default};
