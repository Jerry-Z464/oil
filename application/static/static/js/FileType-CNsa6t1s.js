var o=(g,p,a)=>new Promise((d,r)=>{var u=n=>{try{e(a.next(n))}catch(s){r(s)}},t=n=>{try{e(a.throw(n))}catch(s){r(s)}},e=n=>n.done?d(n.value):Promise.resolve(n.value).then(u,t);e((a=a.apply(g,p)).next())});import{f as m,B as b}from"./setting-bzqi1Zug.js";import{A as B,b as h,o as k,I as y,w as v,y as C,M as F,P as i,Y as c,$ as f,aG as _,aj as l}from"./index-DlZhamGx.js";const M={class:"app-container"},E={class:"filter-container"},P=B({name:"FileType",__name:"FileType",setup(g){const p=h(null);k(()=>{a()});const a=()=>o(null,null,function*(){const{data:t}=yield m.getFileTypeList();p.value=t}),d=()=>{_.prompt("请输入类型名称","添加类型",{confirmButtonText:"确认",cancelButtonText:"取消",inputPattern:/\S+/,inputErrorMessage:"输入类型名称不能为空"}).then(e=>o(null,[e],function*({value:t}){yield m.addFileType({name:t.trim()}),l({type:"success",message:"添加成功！"}),yield a()})).catch(()=>{l({type:"info",message:"已取消添加"})})},r=t=>o(null,null,function*(){_.confirm("此操作将永久删除该类型, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>o(null,null,function*(){yield m.delFileType({id:t.id}),l({type:"success",message:"删除成功！"}),yield a()})).catch(()=>{l({type:"info",message:"已取消删除！"})})}),u=t=>o(null,null,function*(){_.prompt("请输入类型名称","修改类型名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.name,inputPattern:/\S+/,inputErrorMessage:"输入类型名称不能为空"}).then(n=>o(null,[n],function*({value:e}){yield m.updateFileType({id:t.id,name:e.trim()}),l({type:"success",message:"修改成功！"}),yield a()})).catch(()=>{l({type:"info",message:"已取消修改！"})})});return(t,e)=>{const n=y("el-button"),s=y("el-table-column"),T=y("el-link");return C(),v("div",M,[F("div",E,[i(n,{type:"primary",class:"filter-item",onClick:d},{default:c(()=>[...e[0]||(e[0]=[f("添加类型",-1)])]),_:1})]),i(b,{data:p.value,border:""},{default:c(()=>[i(s,{type:"index",label:"序号",align:"center",width:"60"}),i(s,{prop:"name",label:"类型名称",align:"center","min-width":"120"}),i(s,{prop:"createTime",label:"创建时间",align:"center","min-width":"150"}),i(s,{prop:"updateTime",label:"修改时间",align:"center","min-width":"150"}),i(s,{label:"操作",align:"center","min-width":"140"},{default:c(({row:w})=>[i(T,{type:"primary",onClick:x=>u(w)},{default:c(()=>[...e[1]||(e[1]=[f(" 修改 ",-1)])]),_:1},8,["onClick"]),i(T,{type:"danger",style:{"margin-left":"8px"},onClick:x=>r(w)},{default:c(()=>[...e[2]||(e[2]=[f(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])}}});export{P as default};
