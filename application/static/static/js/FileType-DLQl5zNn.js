var o=(g,p,a)=>new Promise((d,r)=>{var u=n=>{try{e(a.next(n))}catch(i){r(i)}},t=n=>{try{e(a.throw(n))}catch(i){r(i)}},e=n=>n.done?d(n.value):Promise.resolve(n.value).then(u,t);e((a=a.apply(g,p)).next())});import{f as m}from"./setting-CF3FtGYT.js";import{B}from"./BaseTable-CN9KI-X5.js";import{D as b,r as h,o as k,R as y,y as v,z as C,M as F,P as s,X as c,a2 as f,aK as _,an as l}from"./index-DofruHnK.js";const M={class:"app-container"},E={class:"filter-container"},S=b({name:"FileType",__name:"FileType",setup(g){const p=h(null);k(()=>{a()});const a=()=>o(null,null,function*(){const{data:t}=yield m.getFileTypeList();p.value=t}),d=()=>{_.prompt("请输入类型名称","添加类型",{confirmButtonText:"确认",cancelButtonText:"取消",inputPattern:/\S+/,inputErrorMessage:"输入类型名称不能为空"}).then(e=>o(null,[e],function*({value:t}){yield m.addFileType({name:t.trim()}),l({type:"success",message:"添加成功！"}),yield a()})).catch(()=>{l({type:"info",message:"已取消添加"})})},r=t=>o(null,null,function*(){_.confirm("此操作将永久删除该类型, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>o(null,null,function*(){yield m.delFileType({id:t.id}),l({type:"success",message:"删除成功！"}),yield a()})).catch(()=>{l({type:"info",message:"已取消删除！"})})}),u=t=>o(null,null,function*(){_.prompt("请输入类型名称","修改类型名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.name,inputPattern:/\S+/,inputErrorMessage:"输入类型名称不能为空"}).then(n=>o(null,[n],function*({value:e}){yield m.updateFileType({id:t.id,name:e.trim()}),l({type:"success",message:"修改成功！"}),yield a()})).catch(()=>{l({type:"info",message:"已取消修改！"})})});return(t,e)=>{const n=y("el-button"),i=y("el-table-column"),T=y("el-link");return C(),v("div",M,[F("div",E,[s(n,{type:"primary",class:"filter-item",onClick:d},{default:c(()=>[...e[0]||(e[0]=[f("添加类型",-1)])]),_:1})]),s(B,{data:p.value,border:""},{default:c(()=>[s(i,{type:"index",label:"序号",align:"center",width:"60"}),s(i,{prop:"name",label:"类型名称",align:"center","min-width":"120"}),s(i,{prop:"createTime",label:"创建时间",align:"center","min-width":"150"}),s(i,{prop:"updateTime",label:"修改时间",align:"center","min-width":"150"}),s(i,{label:"操作",align:"center","min-width":"140"},{default:c(({row:x})=>[s(T,{type:"primary",onClick:w=>u(x)},{default:c(()=>[...e[1]||(e[1]=[f(" 修改 ",-1)])]),_:1},8,["onClick"]),s(T,{type:"danger",style:{"margin-left":"8px"},onClick:w=>r(x)},{default:c(()=>[...e[2]||(e[2]=[f(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])}}});export{S as default};
