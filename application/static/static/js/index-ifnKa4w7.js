var P=Object.defineProperty;var q=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var L=(u,n,r)=>n in u?P(u,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):u[n]=r,D=(u,n)=>{for(var r in n||(n={}))F.call(n,r)&&L(u,r,n[r]);if(q)for(var r of q(n))A.call(n,r)&&L(u,r,n[r]);return u};var h=(u,n,r)=>new Promise((f,c)=>{var y=p=>{try{d(r.next(p))}catch(_){c(_)}},o=p=>{try{d(r.throw(p))}catch(_){c(_)}},d=p=>p.done?f(p.value):Promise.resolve(p.value).then(y,o);d((r=r.apply(u,n)).next())});import{A as k,af as E,L as H,ao as S,b as w,k as R,G as T,a1 as Z,Y as a,y as C,P as e,I as g,$,al as j,o as z,H as G,w as O,M as x,X as W,q as v,aH as X,aI as Y,n as J,D as K,aj as Q,v as ee}from"./index-DlZhamGx.js";import{u as le,b as oe,a as N,d as ae}from"./user-3-fill-QQiYogrC.js";import{_ as te}from"./BaseDialog.vue_vue_type_script_setup_true_lang-PRE88zNh.js";const U=k({name:"Motion",props:{delay:{type:Number,default:50}},render(){const{delay:u}=this,n=E("motion");return H(S("div",{},{default:()=>[this.$slots.default()]}),[[n,{initial:{opacity:0,y:100},enter:{opacity:1,y:0,transition:{delay:u}}}]])}}),re={width:24,height:24,body:'<path fill="currentColor" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"/>'},ne=k({__name:"RegisterDialog",props:{registerVisible:{default:!1,type:Boolean}},emits:["closeRegister"],setup(u,{emit:n}){const r=u,f=w(!1),c=w(),y=R({account:null,name:null,deptId:null,roleId:null,phoneNumber:null,profilePhoto:null,email:null,position:null,principal:"1",password:null}),o=w(D({},y)),d=R({account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,max:20,message:"长度在3到20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码至少6位",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],phoneNumber:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],principal:[{required:!0,message:"请选择是否负责人",trigger:"change"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],deptId:[{required:!0,message:"请输入部门ID",trigger:"blur"}],roleId:[{required:!0,message:"请输入角色ID",trigger:"blur"}],position:[{required:!0,message:"请输入职位",trigger:"blur"}]}),p=s=>h(null,null,function*(){yield s.validate(l=>h(null,null,function*(){l&&(yield j.register(o.value))}))}),_=n,b=()=>{f.value=!1,o.value=D({},y),_("closeRegister")};return T(()=>r.registerVisible,()=>{f.value=r.registerVisible},{deep:!0,immediate:!0}),(s,l)=>{const m=g("el-input"),i=g("el-form-item"),I=g("el-option"),V=g("el-select"),M=g("el-button"),B=g("el-form");return C(),Z(te,{title:"注册",modelValue:f.value,"onUpdate:modelValue":l[11]||(l[11]=t=>f.value=t),onClose:b},{default:a(()=>[e(B,{model:o.value,rules:d,ref_key:"formRef",ref:c,"label-width":"120px"},{default:a(()=>[e(i,{label:"账号",prop:"account"},{default:a(()=>[e(m,{modelValue:o.value.account,"onUpdate:modelValue":l[0]||(l[0]=t=>o.value.account=t),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),e(i,{label:"姓名",prop:"name"},{default:a(()=>[e(m,{modelValue:o.value.name,"onUpdate:modelValue":l[1]||(l[1]=t=>o.value.name=t),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),e(i,{label:"部门ID",prop:"deptId"},{default:a(()=>[e(m,{modelValue:o.value.deptId,"onUpdate:modelValue":l[2]||(l[2]=t=>o.value.deptId=t),placeholder:"请输入部门ID"},null,8,["modelValue"])]),_:1}),e(i,{label:"角色ID",prop:"roleId"},{default:a(()=>[e(m,{modelValue:o.value.roleId,"onUpdate:modelValue":l[3]||(l[3]=t=>o.value.roleId=t),placeholder:"请输入角色ID"},null,8,["modelValue"])]),_:1}),e(i,{label:"手机号",prop:"phoneNumber"},{default:a(()=>[e(m,{modelValue:o.value.phoneNumber,"onUpdate:modelValue":l[4]||(l[4]=t=>o.value.phoneNumber=t),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),e(i,{label:"头像",prop:"profilePhoto"},{default:a(()=>[e(m,{modelValue:o.value.profilePhoto,"onUpdate:modelValue":l[5]||(l[5]=t=>o.value.profilePhoto=t),placeholder:"请输入头像地址"},null,8,["modelValue"])]),_:1}),e(i,{label:"邮箱",prop:"email"},{default:a(()=>[e(m,{modelValue:o.value.email,"onUpdate:modelValue":l[6]||(l[6]=t=>o.value.email=t),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),e(i,{label:"职位",prop:"position"},{default:a(()=>[e(m,{modelValue:o.value.position,"onUpdate:modelValue":l[7]||(l[7]=t=>o.value.position=t),placeholder:"请输入职位"},null,8,["modelValue"])]),_:1}),e(i,{label:"是否负责人",prop:"principal"},{default:a(()=>[e(V,{modelValue:o.value.principal,"onUpdate:modelValue":l[8]||(l[8]=t=>o.value.principal=t),placeholder:"请选择"},{default:a(()=>[e(I,{label:"是",value:"1"}),e(I,{label:"否",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"密码",prop:"password"},{default:a(()=>[e(m,{modelValue:o.value.password,"onUpdate:modelValue":l[9]||(l[9]=t=>o.value.password=t),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),e(i,null,{default:a(()=>[e(M,{type:"primary",onClick:l[10]||(l[10]=t=>p(c.value))},{default:a(()=>[...l[12]||(l[12]=[$("提交",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}}),se={class:"login-container"},ue={class:"login-box"},ie={class:"outline-none",style:{"letter-spacing":"5px"}},de={class:"login-form"},pe=k({name:"Login",__name:"index",setup(u){const n=J(),r=w(!1),f=w(!1),c=w(),{initStorage:y}=le();y();const{title:o}=oe(),d=R({account:null,password:null}),p=b=>h(null,null,function*(){f.value=!0,b&&(yield b.validate(s=>{s&&(X().loginByUsername(d).then(l=>{Y().then(()=>{n.push(K(!0).path),Q.success("Login successful")}),f.value=!1}),f.value=!1)}))});function _({code:b}){b==="Enter"&&p(c.value)}return z(()=>{window.document.addEventListener("keypress",_)}),G(()=>{window.document.removeEventListener("keypress",_)}),(b,s)=>{const l=g("el-input"),m=g("el-form-item"),i=g("el-button"),I=g("el-form");return C(),O("div",se,[x("div",ue,[x("h1",ie,W(v(o)),1),x("div",de,[e(v(U),null,{default:a(()=>[...s[4]||(s[4]=[x("h2",{class:"outline-none"},"Welcome",-1)])]),_:1}),e(I,{ref_key:"ruleFormRef",ref:c,model:d,size:"large"},{default:a(()=>[e(v(U),{delay:100},{default:a(()=>[e(m,{rules:[{required:!0,message:"Please enter your account",trigger:"blur"}],prop:"account"},{default:a(()=>[e(l,{modelValue:d.account,"onUpdate:modelValue":s[0]||(s[0]=V=>d.account=V),clearable:"",placeholder:"Account","prefix-icon":v(N)(v(ae))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),e(v(U),{delay:150},{default:a(()=>[e(m,{prop:"password"},{default:a(()=>[e(l,{modelValue:d.password,"onUpdate:modelValue":s[1]||(s[1]=V=>d.password=V),clearable:"","show-password":"",placeholder:"Password","prefix-icon":v(N)(v(re))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),e(v(U),{delay:250},{default:a(()=>[e(i,{class:"w-full mt-4",type:"primary",loading:f.value,onClick:s[2]||(s[2]=V=>p(c.value))},{default:a(()=>[...s[5]||(s[5]=[$("Login",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),e(ne,{"register-visible":r.value,onCloseRegister:s[3]||(s[3]=V=>r.value=!1)},null,8,["register-visible"])])])}}}),ve=ee(pe,[["__scopeId","data-v-b9a84f81"]]);export{ve as default};
