var i=(g,r,a)=>new Promise((d,p)=>{var u=n=>{try{e(a.next(n))}catch(o){p(o)}},t=n=>{try{e(a.throw(n))}catch(o){p(o)}},e=n=>n.done?d(n.value):Promise.resolve(n.value).then(u,t);e((a=a.apply(g,r)).next())});import{R as m,B as R}from"./setting-bzqi1Zug.js";import{A as B,b as h,o as k,I as f,w as v,y as C,M as T,P as s,Y as c,$ as _,aG as y,aj as l}from"./index-DlZhamGx.js";const M={class:"app-container"},E={class:"filter-container"},P=B({name:"Roles",__name:"Roles",setup(g){const r=h(null);k(()=>{a()});const a=()=>i(null,null,function*(){const{data:t}=yield m.getRoleList();r.value=t}),d=()=>{y.prompt("请输入角色名称","添加类型",{confirmButtonText:"确认",cancelButtonText:"取消",inputPattern:/\S+/,inputErrorMessage:"输入角色名称不能为空"}).then(e=>i(null,[e],function*({value:t}){yield m.addRole({name:t.trim()}),l.success("添加成功！"),yield a()})).catch(()=>{l.info("已取消添加")})},p=t=>i(null,null,function*(){y.confirm("此操作将永久删除该角色, 是否继续?","提示",{type:"warning"}).then(()=>i(null,null,function*(){yield m.delRole({id:t.id}),yield a(),l.success("删除成功！")})).catch(()=>{l.info("已取消删除")})}),u=t=>i(null,null,function*(){y.prompt("请输入角色名称","修改角色名称",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.name,inputPattern:/\S+/,inputErrorMessage:"输入角色名称不能为空"}).then(n=>i(null,[n],function*({value:e}){yield m.updateRole({id:t.id,name:e.trim()}),yield a(),l({type:"success",message:"修改成功！"})})).catch(()=>{l({type:"info",message:"已取消修改！"})})});return(t,e)=>{const n=f("el-button"),o=f("el-table-column"),w=f("el-link");return C(),v("div",M,[T("div",E,[s(n,{type:"primary",class:"filter-item",onClick:d},{default:c(()=>[...e[0]||(e[0]=[_("添加角色",-1)])]),_:1})]),s(R,{data:r.value,border:""},{default:c(()=>[s(o,{type:"index",label:"序号",align:"center",width:"60"}),s(o,{prop:"name",label:"角色名称",align:"center","min-width":"120"}),s(o,{prop:"createTime",label:"创建时间",align:"center","min-width":"150"}),s(o,{prop:"updateTime",label:"修改时间",align:"center","min-width":"150"}),s(o,{label:"操作",align:"center","min-width":"140"},{default:c(({row:b})=>[s(w,{type:"primary",onClick:x=>u(b)},{default:c(()=>[...e[1]||(e[1]=[_(" 修改 ",-1)])]),_:1},8,["onClick"]),s(w,{type:"danger",style:{"margin-left":"8px"},onClick:x=>p(b)},{default:c(()=>[...e[2]||(e[2]=[_(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])}}});export{P as default};
