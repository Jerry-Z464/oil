var E=Object.defineProperty;var q=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var z=(i,n,t)=>n in i?E(i,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[n]=t,$=(i,n)=>{for(var t in n||(n={}))S.call(n,t)&&z(i,t,n[t]);if(q)for(var t of q(n))j.call(n,t)&&z(i,t,n[t]);return i};var _=(i,n,t)=>new Promise((y,d)=>{var k=r=>{try{c(t.next(r))}catch(b){d(b)}},a=r=>{try{c(t.throw(r))}catch(b){d(b)}},c=r=>r.done?y(r.value):Promise.resolve(r.value).then(k,a);c((t=t.apply(i,n)).next())});import{m as C,B as G}from"./setting-bzqi1Zug.js";import{_ as J}from"./BaseDialog.vue_vue_type_script_setup_true_lang-PRE88zNh.js";import{A as O,b as p,k as T,o as P,I as m,w as Y,y as D,M as f,P as l,Y as s,$ as v,a1 as H,J as K,aG as Q,aj as U,v as W}from"./index-DlZhamGx.js";const X={class:"app-container"},Z={class:"filter-container"},h={class:"flex-btn"},ee={class:"dialog-footer"},le=O({name:"MenuList",__name:"MenuList",setup(i){const n=p(null),t=p(!1),y=T({add:"添加菜单",update:"修改菜单"}),d=p(null),k=T({parentId:0,title:"",name:"",rank:null,level:null}),a=p($({},k)),c=T({title:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],name:[{required:!0,message:"请输入路由路径",trigger:"blur"}],rank:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]}),r=p(),b=p(null);P(()=>{M()});const M=()=>_(null,null,function*(){const{data:u}=yield C.getMenuList();n.value=u}),F=u=>{Q.confirm("此操作将永久删除该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>_(null,null,function*(){yield C.delMenu({id:u.id}),U({type:"success",message:"删除成功！"}),yield M()})).catch(()=>{U({type:"info",message:"已取消删除！"})})},B=(u,e)=>{d.value=u,e!==""&&u==="add"?(a.value.level=e.level+1,a.value.parentId=e.parentId):e!==""&&u==="update"&&(b.value=e.id,a.value=e),t.value=!0},R=u=>_(null,null,function*(){u&&(yield u.validate(e=>_(null,null,function*(){e&&(d.value==="update"?yield C.updateMenu(a.value):yield C.addMenu(a.value),U({type:"success",message:y[d.value]+"成功！"}),w(),yield M())})))}),w=()=>{var u;t.value=!1,a.value=$({},k),(u=r.value)==null||u.resetFields()};return(u,e)=>{const I=m("el-button"),g=m("el-table-column"),L=m("el-link"),V=m("el-input"),x=m("el-form-item"),A=m("el-form");return D(),Y("div",X,[f("div",Z,[l(I,{type:"primary",class:"filter-item",onClick:e[0]||(e[0]=o=>B("add",""))},{default:s(()=>[...e[7]||(e[7]=[v("添加菜单",-1)])]),_:1})]),l(G,{data:n.value,style:{width:"100%","margin-bottom":"20px"},"row-key":"id",border:"","default-expand-all":""},{default:s(()=>[l(g,{prop:"title",label:"菜单名称",align:"center"}),l(g,{prop:"name",label:"路由名称",align:"center"}),l(g,{prop:"level",label:"菜单等级",sortable:"",align:"center"}),l(g,{prop:"rank",label:"路由等级",sortable:"",align:"center"}),l(g,{label:"操作",align:"center",width:"200",fixed:"right"},{default:s(({row:o})=>[f("div",h,[l(L,{type:"primary",onClick:N=>B("add",o)},{default:s(()=>[...e[8]||(e[8]=[v("添加",-1)])]),_:1},8,["onClick"]),l(L,{type:"primary",onClick:N=>B("update",o)},{default:s(()=>[...e[9]||(e[9]=[v("修改",-1)])]),_:1},8,["onClick"]),l(L,{type:"danger",onClick:N=>F(o)},{default:s(()=>[...e[10]||(e[10]=[v("删除",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"]),l(J,{modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value=o),title:y[d.value],onClose:w},{footer:s(()=>[f("div",ee,[l(I,{onClick:w},{default:s(()=>[...e[14]||(e[14]=[v("取消",-1)])]),_:1}),l(I,{type:"primary",onClick:e[5]||(e[5]=o=>R(r.value))},{default:s(()=>[...e[15]||(e[15]=[v("确定",-1)])]),_:1})])]),default:s(()=>[l(A,{ref_key:"formRef",ref:r,model:a.value,"label-width":"auto","label-position":"right",rules:c},{default:s(()=>[l(x,{label:"菜单名称",prop:"title"},{default:s(()=>[l(V,{modelValue:a.value.title,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.title=o),placeholder:"请输入菜单名称",clearable:""},null,8,["modelValue"])]),_:1}),l(x,{label:"路由路径",prop:"name"},{default:s(()=>[l(V,{modelValue:a.value.name,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.name=o),placeholder:"请输入路由路径",clearable:""},null,8,["modelValue"]),e[11]||(e[11]=f("span",{style:{color:"#f56c6c","font-size":"12px"}},"路由路径：建议首字符大写",-1))]),_:1}),l(x,{label:"菜单排序",prop:"rank"},{default:s(()=>[l(V,{modelValue:a.value.rank,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.rank=o),placeholder:"请输入菜单排序",clearable:""},null,8,["modelValue"]),e[12]||(e[12]=f("span",{style:{color:"#f56c6c","font-size":"12px"}},"菜单排序，值越高排的越后,数值只能为正整数。如：2",-1))]),_:1}),d.value==="update"?(D(),H(x,{key:0,label:"菜单等级",prop:"level"},{default:s(()=>[l(V,{modelValue:a.value.level,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.level=o),placeholder:"请输入菜单等级",clearable:""},null,8,["modelValue"]),e[13]||(e[13]=f("span",{style:{color:"#f56c6c","font-size":"12px"}},"菜单等级，多级菜单中显示在当前主菜单你对应级别的菜单位置,数值只能为正整数。如：2",-1))]),_:1})):K("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),se=W(le,[["__scopeId","data-v-9e70d6f3"]]);export{se as default};
